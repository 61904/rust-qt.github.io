<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Running generator - Ritual</title><meta name=description content="Use C++ libraries from Rust"><meta name=generator content="Hugo 0.66.0"><link href=https://rust-qt.github.io/index.xml rel=alternate type=application/rss+xml><link rel=canonical href=https://rust-qt.github.io/processing_cpp_library/running_generator/><link rel=stylesheet href=https://rust-qt.github.io/css/theme.min.css><script src=https://use.fontawesome.com/releases/v5.0.6/js/all.js></script><link rel=stylesheet href=https://rust-qt.github.io/css/chroma.css><script src=https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js></script><script src=https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js></script><script src=https://rust-qt.github.io/js/bundle.js></script><style>:root{}</style><meta property="og:title" content="Running generator"><meta property="og:description" content="Creating the generator Create a new binary Rust crate and add ritual as a dependency. In the main function, you need to construct a ritual::config::GlobalConfig and pass it to ritual::cli::run_from_args. GlobalConfig allows you to process multiple libraries (or parts of a library as separate crates) in a single run, but in the simple case it just contains a function that creates a Config for your library.
Config is the main way of configuring ritual."><meta property="og:type" content="article"><meta property="og:url" content="https://rust-qt.github.io/processing_cpp_library/running_generator/"><meta property="og:image" content="https://rust-qt.github.io/images/og-image.png"><meta property="og:site_name" content="Ritual"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rust-qt.github.io/images/og-image.png"><meta name=twitter:title content="Running generator"><meta name=twitter:description content="Creating the generator Create a new binary Rust crate and add ritual as a dependency. In the main function, you need to construct a ritual::config::GlobalConfig and pass it to ritual::cli::run_from_args. GlobalConfig allows you to process multiple libraries (or parts of a library as separate crates) in a single run, but in the simple case it just contains a function that creates a Config for your library.
Config is the main way of configuring ritual."><meta itemprop=name content="Running generator"><meta itemprop=description content="Creating the generator Create a new binary Rust crate and add ritual as a dependency. In the main function, you need to construct a ritual::config::GlobalConfig and pass it to ritual::cli::run_from_args. GlobalConfig allows you to process multiple libraries (or parts of a library as separate crates) in a single run, but in the simple case it just contains a function that creates a Config for your library.
Config is the main way of configuring ritual."><meta itemprop=wordCount content="326"><meta itemprop=image content="https://rust-qt.github.io/images/og-image.png"><meta itemprop=keywords content></head><body><div class=container><header><h1><a href=/>Ritual</a></h1><a href=https://github.com/rust-qt/ritual class=github><i class="fab fa-github"></i></a><p class=description>Use C++ libraries from Rust</p></header><div class=global-menu><nav><ul><li><a href=/ritual/>About Ritual</a></li><li><a href=/qt/>Rust + Qt guide</a></li><li><a href=/blog/>Blog</a></li></ul></nav></div><div class=content-container><main><h1>Running generator</h1><h2 id=creating-the-generator>Creating the generator</h2><p>Create a new binary Rust crate and add <code>ritual</code> as a dependency. In the <code>main</code> function, you need to construct a <code>ritual::config::GlobalConfig</code> and pass it to <code>ritual::cli::run_from_args</code>. <code>GlobalConfig</code> allows you to process multiple libraries (or parts of a library as separate crates) in a single run, but in the <a href=https://github.com/rust-qt/generator-example/blob/master/src/main.rs>simple case</a> it just contains a function that creates a <code>Config</code> for your library.</p><p><code>Config</code> is the main way of configuring ritual. You can use it to set up every property the generator supports. It also allows you to set up hooks that run in particular points of the processing and allow you to filter or alter the results programmatically. See the documentation of <code>Config</code> and <a href=https://github.com/rust-qt/generator-example/blob/master/src/main.rs>this example</a> for more information.</p><h2 id=running-the-generator>Running the generator</h2><p>Ritual needs a workspace to work. Workspace is a directory that contains ritual&rsquo;s databases, generated crates, logs, and temporary files. You should use the same workspace for consecutive runs of the same generator.</p><p>You can run the generator like this:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>cargo run -- ~/clipper/workspace -c clipper -o main
</code></pre></div><p>The <code>-o</code> flag specifies the operations to run. Ritual&rsquo;s processing consists of <a href=https://github.com/rust-qt/ritual/blob/master/ritual/src/processor.rs>multiple steps</a>. <code>main</code> is an alias for the main sequence of operations that produce a complete crate from scratch. You can also specify a specific operation (e.g. <code>rust_generator</code>) or resume the main sequence from a certain point with <code>'[rust_generator..)'</code>.</p><p>If everything is successful, the generated crate will appear in the <code>out</code> subdirectory of the workspace.</p><h2 id=adding-tests-and-custom-rust-code>Adding tests and custom Rust code</h2><p>In addition to <code>Config</code>, you can also specify a crate template to be used. Crate template is a directory normally placed in the repository of your generator. You can supply a crate template with <code>Config::set_crate_template_path</code>. It may contain tests, examples, extra source code, and any other files. These files are merged into the files generated by ritual. It&rsquo;s recommended to have some tests in your crate template. At the end of the main sequence, ritual will run these tests.</p><div class=edit-meta><a href=https://github.com/rust-qt/rust-qt.github.io/edit/source/content/processing_cpp_library/running_generator.md class=edit-page><i class="fas fa-pen-square"></i>Edit on GitHub</a></div><nav class=pagination><a class="nav nav-prev" href=https://rust-qt.github.io/processing_cpp_library/setting_up/ title="Setting up"><i class="fas fa-arrow-left" aria-hidden=true></i>Prev - Setting up</a>
<a class="nav nav-next" href=https://rust-qt.github.io/processing_cpp_library/setting_up/ title="Setting up">Next - Setting up <i class="fas fa-arrow-right" aria-hidden=true></i></a></nav><footer><p class=powered>Powered by <a href=https://gohugo.io>Hugo</a>. Theme by <a href=https://themes.gohugo.io/hugo-theme-techdoc/>TechDoc</a>. Designed by <a href=https://github.com/thingsym/hugo-theme-techdoc>Thingsym</a>.</p></footer></main><div class=sidebar><nav class=open-menu><ul><li><a href=https://rust-qt.github.io/>Home</a></li><li><a href=https://rust-qt.github.io/ritual/>About Ritual</a><ul class=sub-menu><li><a href=https://rust-qt.github.io/ritual/setting_up/>Setting up</a></li><li><a href=https://rust-qt.github.io/ritual/running_generator/>Running generator</a></li></ul></li><li><a href=https://rust-qt.github.io/qt/>Rust + Qt guide</a><ul class=sub-menu><li><a href=https://rust-qt.github.io/qt/setting_up/>Setting up</a></li><li><a href=https://rust-qt.github.io/qt/getting_started/>Getting started</a></li><li><a href=https://rust-qt.github.io/qt/smart_pointers/>Smart pointers</a></li><li><a href=https://rust-qt.github.io/qt/unsafety/>Unsafety</a></li><li><a href=https://rust-qt.github.io/qt/deployment/>Deployment</a></li></ul></li><li class=parent><a href=https://rust-qt.github.io/processing_cpp_library/>Processing a C++ library</a><ul class=sub-menu><li><a href=https://rust-qt.github.io/processing_cpp_library/setting_up/>Setting up</a></li><li class=active><a href=https://rust-qt.github.io/processing_cpp_library/running_generator/>Running generator</a></li></ul></li></ul></nav><div class=sidebar-footer></div></div></div><a href=# id=backtothetop-fixed class=backtothetop data-backtothetop-duration=600 data-backtothetop-easing=easeOutQuart data-backtothetop-fixed-fadein=1000 data-backtothetop-fixed-fadeout=1000 data-backtothetop-fixed-bottom=10 data-backtothetop-fixed-right=20><span class="fa-layers fa-fw"><i class="fas fa-circle"></i><i class="fas fa-arrow-circle-up"></i></span></a></div></body></html>