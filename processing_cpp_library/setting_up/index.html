<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Setting up - Ritual</title><meta name=description content="Use C++ libraries from Rust"><meta name=generator content="Hugo 0.66.0"><link href=https://rust-qt.github.io/index.xml rel=alternate type=application/rss+xml><link rel=canonical href=https://rust-qt.github.io/processing_cpp_library/setting_up/><link rel=stylesheet href=https://rust-qt.github.io/css/theme.min.css><script src=https://use.fontawesome.com/releases/v5.0.6/js/all.js></script><link rel=stylesheet href=https://rust-qt.github.io/css/chroma.css><script src=https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js></script><script src=https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js></script><script src=https://rust-qt.github.io/js/bundle.js></script><style>:root{}</style><meta property="og:title" content="Setting up"><meta property="og:description" content="Using docker (recommended) To make sure the parsing results are consistent and reproducible, it&rsquo;s recommended to use a reproducible environment, such as provided by docker. This will also help your future contributors.
Ritual provides a Dockerfile containing its dependencies. This image is published at riateche/ritual_builder. If the published version isn&rsquo;t suitable, you can build the image locally:
cd ritual docker build . -f docker.builder.dockerfile -t riateche/ritual_builder Use this image as a base and create your own image that installs and sets up the C++ library you want to work with."><meta property="og:type" content="article"><meta property="og:url" content="https://rust-qt.github.io/processing_cpp_library/setting_up/"><meta property="og:image" content="https://rust-qt.github.io/images/og-image.png"><meta property="og:site_name" content="Ritual"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rust-qt.github.io/images/og-image.png"><meta name=twitter:title content="Setting up"><meta name=twitter:description content="Using docker (recommended) To make sure the parsing results are consistent and reproducible, it&rsquo;s recommended to use a reproducible environment, such as provided by docker. This will also help your future contributors.
Ritual provides a Dockerfile containing its dependencies. This image is published at riateche/ritual_builder. If the published version isn&rsquo;t suitable, you can build the image locally:
cd ritual docker build . -f docker.builder.dockerfile -t riateche/ritual_builder Use this image as a base and create your own image that installs and sets up the C++ library you want to work with."><meta itemprop=name content="Setting up"><meta itemprop=description content="Using docker (recommended) To make sure the parsing results are consistent and reproducible, it&rsquo;s recommended to use a reproducible environment, such as provided by docker. This will also help your future contributors.
Ritual provides a Dockerfile containing its dependencies. This image is published at riateche/ritual_builder. If the published version isn&rsquo;t suitable, you can build the image locally:
cd ritual docker build . -f docker.builder.dockerfile -t riateche/ritual_builder Use this image as a base and create your own image that installs and sets up the C++ library you want to work with."><meta itemprop=wordCount content="461"><meta itemprop=image content="https://rust-qt.github.io/images/og-image.png"><meta itemprop=keywords content></head><body><div class=container><header><h1><a href=/>Ritual</a></h1><a href=https://github.com/rust-qt/ritual class=github><i class="fab fa-github"></i></a><p class=description>Use C++ libraries from Rust</p></header><div class=global-menu><nav><ul><li><a href=/ritual/>About Ritual</a></li><li><a href=/qt/>Rust + Qt guide</a></li><li><a href=/blog/>Blog</a></li></ul></nav></div><div class=content-container><main><h1>Setting up</h1><h2 id=using-docker-recommended>Using docker (recommended)</h2><p>To make sure the parsing results are consistent and reproducible, it&rsquo;s recommended to use a reproducible environment, such as provided by <code>docker</code>. This will also help your future contributors.</p><p>Ritual provides a <a href=https://github.com/rust-qt/ritual/blob/master/docker.builder.dockerfile>Dockerfile</a> containing its dependencies. This image is published at <a href=https://hub.docker.com/r/riateche/ritual_builder>riateche/ritual_builder</a>. If the published version isn&rsquo;t suitable, you can build the image locally:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>cd</span> ritual
docker build . -f docker.builder.dockerfile -t riateche/ritual_builder
</code></pre></div><p>Use this image as a base and create your own image that installs and sets up the C++ library you want to work with. See <a href=Dockerfile>Dockerfile</a> for an example.</p><p>Note that the image contains only the environment. No pre-built ritual artifacts are included. This allows you to edit the source code of your generator and re-run it without the slow process of rebuilding the docker image. You can use <code>cargo</code> to run the generator, just like you would normally do it on the host system.</p><p>When running the container, mount <code>/build</code> to a persistent directory on the host system. This directory will contain all temporary build files, so making it persistent will allow you to recreate the container without having to recompile everything from scratch.</p><p>In addition to the build directory, you should also mount one or more directories containing the source code of your generator and the ritual workspace directory (see below) to make it available in the container. The paths to these directories can be arbitrary.</p><p>Here is an example of running a container:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>cd</span> ~/clipper/repo
<span class=c1># build your image</span>
docker build . -t clipper_generator
<span class=c1># remove previously created container</span>
docker ps -a -q --filter <span class=s2>&#34;name=clipper_generator&#34;</span> <span class=p>|</span> grep -q . <span class=o>&amp;&amp;</span> <span class=se>\
</span><span class=se></span>    docker rm clipper_generator
<span class=c1># create an container and run a command in it</span>
docker run <span class=se>\
</span><span class=se></span>    --mount <span class=nv>type</span><span class=o>=</span>bind,source<span class=o>=</span>~/clipper/repo,destination<span class=o>=</span>/repo <span class=se>\
</span><span class=se></span>    --mount <span class=nv>type</span><span class=o>=</span>bind,source<span class=o>=</span>~/clipper/workspace,destination<span class=o>=</span>/workspace <span class=se>\
</span><span class=se></span>    --mount <span class=nv>type</span><span class=o>=</span>bind,source<span class=o>=</span>~/clipper/tmp,destination<span class=o>=</span>/build <span class=se>\
</span><span class=se></span>    --name clipper_generator <span class=se>\
</span><span class=se></span>    --hostname clipper_generator
    -it <span class=se>\
</span><span class=se></span>    clipper_generator <span class=se>\
</span><span class=se></span>    your_command
</code></pre></div><p>Replace <code>your_command</code> with a cargo command you want to run or just specify <code>bash</code> to open a shell inside the container.</p><h2 id=without-docker>Without docker</h2><p>In case you don&rsquo;t want or can&rsquo;t use <code>docker</code>, you can just install all required dependencies on your host system and run your generator natively with <code>cargo</code>, like any Rust project.</p><p>The dependencies are <code>cmake</code> and <code>libclang</code>. Sometimes you may need to set some environment variables to make <code>libclang</code> work correctly, for example:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>export</span> <span class=nv>LIBCLANG_PATH</span><span class=o>=</span>/usr/lib/llvm-9.0/lib
<span class=nb>export</span> <span class=nv>CLANG_SYSTEM_INCLUDE_PATH</span><span class=o>=</span>/usr/lib/clang/9.0.0/include
</code></pre></div><p>You can clone <a href=https://github.com/rust-qt/ritual>ritual</a> and run <code>cargo test</code> to make sure it&rsquo;s all working.</p><p>You should also install the C++ library you want to work with. If the library is not available in the system directories, you should set up environment variables to make it available. In addition to variables recognized by standard tools (<code>LIB</code>, <code>PATH</code>, <code>LIBRARY_PATH</code>, <code>LD_LIBRARY_PATH</code>, <code>DYLD_FRAMEWORK_PATH</code>), there are also variables recognized by ritual (<code>RITUAL_LIBRARY_PATH</code>, <code>RITUAL_FRAMEWORK_PATH</code>, <code>RITUAL_INCLUDE_PATH</code>) that you may also need to set.</p><div class=edit-meta><a href=https://github.com/rust-qt/rust-qt.github.io/edit/source/content/processing_cpp_library/setting_up.md class=edit-page><i class="fas fa-pen-square"></i>Edit on GitHub</a></div><nav class=pagination><a class="nav nav-prev" href=https://rust-qt.github.io/processing_cpp_library/ title="Processing a C++ library"><i class="fas fa-arrow-left" aria-hidden=true></i>Prev - Processing a C++ library</a>
<a class="nav nav-next" href=https://rust-qt.github.io/processing_cpp_library/running_generator/ title="Running generator">Next - Running generator <i class="fas fa-arrow-right" aria-hidden=true></i></a></nav><footer><p class=powered>Powered by <a href=https://gohugo.io>Hugo</a>. Theme by <a href=https://themes.gohugo.io/hugo-theme-techdoc/>TechDoc</a>. Designed by <a href=https://github.com/thingsym/hugo-theme-techdoc>Thingsym</a>.</p></footer></main><div class=sidebar><nav class=open-menu><ul><li><a href=https://rust-qt.github.io/>Home</a></li><li><a href=https://rust-qt.github.io/ritual/>About Ritual</a><ul class=sub-menu><li><a href=https://rust-qt.github.io/ritual/setting_up/>Setting up</a></li><li><a href=https://rust-qt.github.io/ritual/running_generator/>Running generator</a></li></ul></li><li><a href=https://rust-qt.github.io/qt/>Rust + Qt guide</a><ul class=sub-menu><li><a href=https://rust-qt.github.io/qt/setting_up/>Setting up</a></li><li><a href=https://rust-qt.github.io/qt/getting_started/>Getting started</a></li><li><a href=https://rust-qt.github.io/qt/smart_pointers/>Smart pointers</a></li><li><a href=https://rust-qt.github.io/qt/unsafety/>Unsafety</a></li><li><a href=https://rust-qt.github.io/qt/deployment/>Deployment</a></li></ul></li><li class=parent><a href=https://rust-qt.github.io/processing_cpp_library/>Processing a C++ library</a><ul class=sub-menu><li class=active><a href=https://rust-qt.github.io/processing_cpp_library/setting_up/>Setting up</a></li><li><a href=https://rust-qt.github.io/processing_cpp_library/running_generator/>Running generator</a></li></ul></li></ul></nav><div class=sidebar-footer></div></div></div><a href=# id=backtothetop-fixed class=backtothetop data-backtothetop-duration=600 data-backtothetop-easing=easeOutQuart data-backtothetop-fixed-fadein=1000 data-backtothetop-fixed-fadeout=1000 data-backtothetop-fixed-bottom=10 data-backtothetop-fixed-right=20><span class="fa-layers fa-fw"><i class="fas fa-circle"></i><i class="fas fa-arrow-circle-up"></i></span></a></div></body></html>